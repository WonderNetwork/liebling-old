{{!--
This header template is shared across all the pages.
--}}

{{#if background}}
  <header class="m-header with-picture js-header">
{{else}}
  <header class="m-header js-header">
{{/if}}
  <div class="m-mobile-topbar" data-aos="fade-down">
    <button class="m-icon-button in-mobile-topbar js-open-menu" aria-label="Open menu">
      <span class="icon-menu"></span>
    </button>
    <a href="/" class="m-logo in-mobile-topbar"></a>
  </div>

  <div class="m-menu js-menu">
    <button class="m-icon-button outlined as-close-menu js-close-menu" aria-label="Close menu">
      <span class="icon-close"></span>
    </button>
    <div class="m-menu__main" data-aos="fade-down">
      <div class="l-wrapper">
        <div class="m-nav">
          <a href="/" class="m-logo in-mobile-topbar"></a>
          <nav class="m-nav__left">
            <ul role="submenu">
              {{#if @site.navigation}}
                {{navigation}}
              {{/if}}
              <li role="menuitem" class="js-submenu-option">
                <button class="m-icon-button in-menu-main more js-toggle-submenu" aria-label="Toggle submenu">
                  <span class="icon-more"></span>
                </button>
                <div class="m-submenu js-submenu">
                  <div class="l-wrapper in-submenu">
                    <section class="m-recent-articles">
                      <h3 class="m-submenu-title in-recent-articles"><a href="/blog">{{t "Recent articles"}}</a></h3>
                      <div class="m-toggle-darkmode js-tooltip" data-tippy-content="{{t "Toggle dark mode"}}">
                        <input type="checkbox" class="js-toggle-darkmode">
                        <div></div>
                      </div>
                      <div class="js-recent-articles">
                        {{#get "posts" limit="4" order="published_at desc"}}
                        {{#foreach posts}}
                        <div>
                          <a href="{{url}}" class="m-recent-article">
                            <div class="m-recent-article__picture">
                              {{#if feature_image}}
                              <div class="lozad" data-background-image="{{img_url feature_image size="s"}}"></div>
                              {{else}}
                              <div class="no-image lozad" data-background-image="{{asset "images/no-image.png"}}"></div>
                              {{/if}}
                            </div>
                            <h3 class="m-recent-article__title js-recent-article-title" title="{{title}}">
                              {{title}}
                            </h3>
                            <span class="m-recent-article__date">{{date published_at timeago="true"}}</span>
                          </a>
                        </div>
                        {{else}}
                        <div class="m-not-found in-recent-articles">{{t "No recent articles found :("}}</div>
                        {{/foreach}}
                        {{/get}}
                      </div>
                    </section>
                </div>
                <section class="m-tags p-bottom">
                      <h3 class="m-submenu-title"><a href="{{@blog.url}}/tags">{{t "All Tags"}}</a></h3>
                      {{#get "tags"}}
                      <ul>
                        {{#foreach tags}}
                        <li>
                          <a href="{{url}}">{{name}}</a>
                        </li>
                        {{else}}
                        <li class="m-not-found">{{t "No tags found :("}}</li>
                        {{/foreach}}
                      </ul>
                      {{/get}}
                    </section>
                    <section class="m-tags">
                      <h3 class="m-submenu-title"><a href="{{@blog.url}}/authors">Authors</a></h3>
                      {{#get "authors" order="name asc" }}
                      <ul>
                        {{#foreach authors}}
                        <li>
                          <a href="{{url}}">{{name}}</a>
                        </li>
                        {{else}}
                        <li class="m-not-found">{{t "No authors found :("}}</li>
                        {{/foreach}}
                      </ul>
                      {{/get}}
                    </section>
                </div>
              </li>
              <li>
                <div class="m-nav__right">
                  {{!-- <div class="site-search-form">
                        <label class="sr-only" for="st-search-input">Search</label>
                        <input class="form-control filter-table site-search-input" type="text" placeholder="Search the WonderProxy blog" id="st-search-input" />
                  </div> --}}
                  {{!-- <button class="m-icon-button in-menu-main js-open-search" aria-label="Open search">
                    <span class="icon-search"></span>
                  </button> --}}
                </div>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
  <nav class="nav-secondary" data-aos="fade-down">
    <div class="l-wrapper">
      <div class="nav-secondary-wrap">
          <ul class="nav-secondary-list">
              <li>{{#link href="/" activeClass="current"}}Recent Articles{{/link}}</li>
              <li>{{#link href="/tag/localization" activeClass="current"}}Localization{{/link}}</li>
              <li>{{#link href="/tag/testing" activeClass="current"}}Testing{{/link}}</li>
              <li>{{#link href="/tag/development" activeClass="current"}}Development{{/link}}</li>
              <li>{{#link href="/tag/marketing" activeClass="current"}}Marketing{{/link}}</li>
          </ul>
        {{> search}}
      </div>
    </div>
  </nav>
</header>
